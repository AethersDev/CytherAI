/**
 * ════════════════════════════════════════════════════════════════════════════════
 * CYTHERAI NORTH-STAR CSS INTEGRATION
 * ════════════════════════════════════════════════════════════════════════════════
 * 
 * Add this after your main styles. Provides:
 * - Data attribute hooks for JS systems
 * - Chapter section markers
 * - Disclosure depth styling
 * - Optical state transitions
 * - Cut-aware element behaviors
 * 
 * ════════════════════════════════════════════════════════════════════════════════
 */

/* ═══════════════════════════════════════════════════════════════════════════════
   ROOT: NORTH-STAR VARIABLES
   ═══════════════════════════════════════════════════════════════════════════════ */

:root {
    /* Optical state modifiers */
    --optical-focus: 1;
    --optical-exposure: 0;
    --optical-development: 0;
    
    /* Chapter progression */
    --chapter-index: 0;
    --chapter-progress: 0;
    
    /* Seal presence */
    --seal-state: 0; /* 0=hidden, 0.5=latent, 0.8=developing, 1=sealed */
    
    /* Pause state */
    --reading-velocity: 1;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   CHAPTER SECTIONS
   ═══════════════════════════════════════════════════════════════════════════════ 
   Mark your existing sections with data-chapter="origin|architecture|capability|sovereignty"
*/

[data-chapter] {
    position: relative;
    
    /* Chapter boundary marker (faint) */
    &::before {
        content: attr(data-chapter);
        position: absolute;
        top: 0;
        left: 0;
        font-family: 'JetBrains Mono', monospace;
        font-size: 8px;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--gold-shadow, #3d3312);
        opacity: 0.2;
        padding: 4px 8px;
        border-left: 1px solid var(--gold-shadow, #3d3312);
        writing-mode: vertical-rl;
    }
}

/* Active chapter gets emphasis */
[data-chapter].active::before {
    opacity: 0.5;
    color: var(--gold-dim, #8a6e1f);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   PROGRESSIVE DISCLOSURE TARGETS
   ═══════════════════════════════════════════════════════════════════════════════
   Add data-disclosure="Your deeper insight here" to any element
*/

[data-disclosure] {
    position: relative;
    cursor: default;
    
    /* Subtle indicator that depth exists */
    &::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 1px;
        background: var(--gold-shadow, #3d3312);
        opacity: 0;
        transition: opacity 0.5s ease;
    }
}

/* Show indicator when user is paused */
body[data-reading="paused"] [data-disclosure]::after {
    opacity: 0.3;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   OPTICAL STATE BEHAVIORS
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Unfocused: Everything slightly soft */
body[data-optical-state="unfocused"] {
    .hero-headline,
    .sovereign-headline {
        filter: blur(0.3px);
        transition: filter 0.5s ease;
    }
}

/* Focusing: Sharpening */
body[data-optical-state="focusing"] {
    .hero-headline,
    .sovereign-headline {
        filter: blur(0);
    }
}

/* Focused: Crystal clear, vignette reduces */
body[data-optical-state="focused"] {
    .proof-interface,
    .ritual-stage {
        box-shadow: 0 0 60px rgba(212, 175, 55, 0.1);
    }
}

/* Exposing: Content becomes more luminous */
body[data-optical-state="exposing"] {
    --gold-core: #e8c84a;
    --text-primary: #ffffff;
    
    .chapter-stamp,
    .spine-artifact {
        text-shadow: 0 0 15px var(--gold-core);
    }
}

/* Developed: Full clarity, page feels "printed" */
body[data-optical-state="developed"] {
    .calibration-mark {
        opacity: 0.5;
    }
    
    .glyph-dust-container {
        opacity: 0.25;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   CUT-AWARE ELEMENTS
   ═══════════════════════════════════════════════════════════════════════════════
   Elements that respond to cinematic cuts
*/

.cut-aware {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

/* During cuts, certain elements should react */
body[data-cut-active="true"] .cut-aware {
    opacity: 0.5;
}

/* Match cut focal point */
[data-match-point] {
    position: relative;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   SEAL PROXIMITY EFFECTS
   ═══════════════════════════════════════════════════════════════════════════════
   Elements near the seal get subtle emphasis
*/

.seal-adjacent {
    transition: all 0.5s ease;
}

body[data-seal-visible="true"] .seal-adjacent {
    filter: brightness(1.1);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   CONSTRAINT REVEAL PREPARATION
   ═══════════════════════════════════════════════════════════════════════════════
   Style hints for the 60% constraint reveal
*/

/* Elements that should dim during constraint reveal */
.constraint-backdrop {
    transition: opacity 0.6s ease, filter 0.6s ease;
}

body[data-constraint-revealed="true"] .constraint-backdrop {
    opacity: 0.3;
    filter: blur(2px);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   SPINE INTEGRATION
   ═══════════════════════════════════════════════════════════════════════════════ */

/* Adjust content to make room for spine on right */
@media (min-width: 1200px) {
    .main-content,
    .proof-interface,
    .hero-content {
        padding-right: clamp(40px, 8vw, 120px);
    }
}

/* Hide spine on mobile */
@media (max-width: 768px) {
    #briefing-spine {
        display: none !important;
    }
    
    .exposure-meter {
        display: none !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MARGINALIA & ATMOSPHERE RESPONSIVE
   ═══════════════════════════════════════════════════════════════════════════════ */

@media (max-width: 1024px) {
    .rule-marginalia {
        display: none;
    }
    
    .calibration-check {
        display: none;
    }
    
    .inference-trace {
        display: none;
    }
}

/* Reduce glyph dust on lower-powered devices */
@media (prefers-reduced-motion: reduce) {
    .glyph-particle {
        animation: none !important;
        opacity: 0.1 !important;
    }
    
    .cut-overlay {
        animation-duration: 0.01ms !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   ARTIFACT TOKENS
   ═══════════════════════════════════════════════════════════════════════════════
   Style individual glyphs that appear in content
*/

.artifact-glyph {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    color: var(--gold-core, #d4af37);
    text-shadow: 0 0 10px var(--gold-dim, #8a6e1f);
    cursor: default;
    user-select: none;
}

.artifact-glyph.lambda::before { content: 'λ'; }
.artifact-glyph.turnstile::before { content: '⊢'; }
.artifact-glyph.arrow::before { content: '→'; }
.artifact-glyph.qed::before { content: '∎'; }

/* ═══════════════════════════════════════════════════════════════════════════════
   PROCEDURE STYLING
   ═══════════════════════════════════════════════════════════════════════════════
   Make the page feel like a procedure being executed
*/

/* Step markers in content */
.procedure-step {
    position: relative;
    padding-left: 2em;
    
    &::before {
        content: counter(procedure-step, decimal-leading-zero);
        counter-increment: procedure-step;
        position: absolute;
        left: 0;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.7em;
        color: var(--gold-shadow, #3d3312);
        opacity: 0.5;
    }
}

/* Initialize counter on container */
.procedure-container {
    counter-reset: procedure-step;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   DOSSIER TEXTURE
   ═══════════════════════════════════════════════════════════════════════════════
   Subtle paper/document feel
*/

body::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0.015;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    z-index: 10000;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   TEMPORAL AWARENESS
   ═══════════════════════════════════════════════════════════════════════════════
   Styles that respond to temporal/circadian system
*/

body[data-temporal-mood="dawn"] {
    --ambient-warmth: 1.1;
}

body[data-temporal-mood="golden"] {
    --ambient-warmth: 1.3;
    
    .sovereign-seal {
        filter: brightness(1.2) saturate(1.1);
    }
}

body[data-temporal-mood="midnight"] {
    --ambient-warmth: 0.9;
    
    .glyph-dust-container {
        opacity: 0.25;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════════
   CONSTRAINT STAMP CONTENT CUSTOMIZATION
   ═══════════════════════════════════════════════════════════════════════════════
   If you want to modify the constraint content via HTML
*/

[data-constraint-spec] {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    color: var(--text-secondary, #9c9b96);
}

[data-constraint-value] {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 300;
    letter-spacing: 0.1em;
    color: var(--gold-core, #d4af37);
    text-shadow: 0 0 20px var(--gold-dim, #8a6e1f);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   UTILITY: HIDE DURING SPECIFIC STATES
   ═══════════════════════════════════════════════════════════════════════════════ */

.hide-on-scroll {
    transition: opacity 0.3s ease;
}

body[data-reading="scrolling"] .hide-on-scroll {
    opacity: 0;
}

.show-on-pause {
    opacity: 0;
    transition: opacity 0.5s ease;
}

body[data-reading="paused"] .show-on-pause {
    opacity: 1;
}
